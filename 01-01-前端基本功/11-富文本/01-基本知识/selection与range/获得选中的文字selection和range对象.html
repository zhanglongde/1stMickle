<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>
        &#8203;光标
        selection可能横跨多个元素
        range 拖蓝
    </title>
</head>
<body>
<div contenteditable="true">
    <div class="text-container">
        some [insertion point] content
    </div>
</div>

<button id="btnInsertHtml">获得选中文字</button>

<script>
    window.onload = function () {
        function getSelection(){
            let selection = window.getSelection()
            console.log(selection)
            if (selection.rangeCount > 0) {
                let range = selection.getRangeAt(0)
                console.log(range)
//                选区的包裹元素
                let $ele = range.commonAncestorContainer
                console.log($ele, typeof $ele)

//                纯文本
                let txt = range.toString()
                console.log(txt)
            }

        }
        var btnInsertHtml = document.querySelector('#btnInsertHtml')
        btnInsertHtml.addEventListener('click', function () {
            getSelection()
        })
    }
</script>
</body>
</html>